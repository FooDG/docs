<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd">
<?asciidoc-toc?>
<?asciidoc-numbered?>

<book lang="en">
<bookinfo>
    <title>Reporting</title>
</bookinfo>
<chapter id="getting-started">
<title>Getting Started<ulink role="edit_me" url="/mnt/docs/docs/.repos/x-plugins/docs/public/reporting/getting-started.asciidoc">Edit me</ulink></title>
<simpara><emphasis>Reporting</emphasis> enables you generate reports that contain Kibana dashboards,
visualizations, and saved searches.</simpara>
<note><simpara>Any user with access to the reporting index has access to every
report generated by all users.</simpara></note>
<simpara id="getting-started-installation">To install Reporting:</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>
If you haven&#8217;t already, install the License plugin in Elasticsearch by running
<literal>bin/plugin</literal> in  your Elasticsearch installation directory.
</simpara>
<programlisting language="sh" linenumbering="unnumbered">bin/plugin install license</programlisting>
</listitem>
<listitem>
<simpara>
Install the Reporting app into Kibana by running <literal>bin/kibana plugin</literal> in your
Kibana installation directory.
</simpara>
<programlisting language="shell" linenumbering="unnumbered">bin/kibana plugin --install kibana/reporting/latest</programlisting>
</listitem>
<listitem>
<simpara>
Set the <literal>reporting.encryptionKey</literal> property in the <literal>kibana.yml</literal> configuration file.
You can use any text string as the encryption key.
</simpara>
<programlisting language="yaml" linenumbering="unnumbered">reporting.encryptionKey: "something_secret"</programlisting>
<note><simpara>If you are using Shield, see <ulink url="https://www.elastic.co/guide/en/shield/2.4/kibana.html">
Using Kibana with Shield</ulink> and <ulink url="https://www.elastic.co/guide/en/shield/2.4/reporting.html">Using
Reporting with Shield</ulink> for additional setup instructions.</simpara></note>
</listitem>
<listitem>
<simpara>
Start Kibana by running <literal>bin/kibana</literal>.
</simpara>
</listitem>
<listitem>
<simpara>
To verify your Reporting installation, point your web browser at
<literal>http://0.0.0.0:5601/</literal> to open Kibana. The Generate Report button is
added to the Toolbar:
</simpara>
<simpara><inlinemediaobject>
  <imageobject>
  <imagedata fileref="images/reporting.jpg"/>
  </imageobject>
  <textobject><phrase>Reporting</phrase></textobject>
</inlinemediaobject></simpara>
</listitem>
</orderedlist>
<note><simpara>If report generation fails with the error
"Phantom immediately exited with: 127" you&#8217;ll need to install the <literal>libfontconfig</literal>
and <literal>libfreetype6</literal> packages.</simpara></note>
<simpara>For offline installation instructions and more, see <link linkend="installing-reporting">Installing Reporting</link>.</simpara>
<bridgehead id="manually-generating-reports" renderas="sect1">Manually Generating Reports<ulink role="edit_me" url="/mnt/docs/docs/.repos/x-plugins/docs/public/reporting/getting-started.asciidoc">Edit me</ulink></bridgehead>
<simpara>The easiest way to generate reports is through the controls in the Kibana UI.</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>
In Kibana, load the dashboard, visualization, or saved search you want to
include in the report.
</simpara>
</listitem>
<listitem>
<simpara>
Click the <emphasis role="strong">Generate PDF</emphasis> button in the Kibana toolbar:
</simpara>
<simpara><inlinemediaobject>
  <imageobject>
  <imagedata fileref="images/reporting.jpg"/>
  </imageobject>
  <textobject><phrase>Reporting</phrase></textobject>
</inlinemediaobject></simpara>
</listitem>
<listitem>
<simpara>
Click <emphasis role="strong">Printable PDF</emphasis>.
</simpara>
</listitem>
</orderedlist>
<note><simpara>If you want to automatically generate reports from a script or with Watcher,
use the displayed Generation URL.</simpara></note>
<bridgehead id="automating-report-generation" renderas="sect1">Automating Report Generation<ulink role="edit_me" url="/mnt/docs/docs/.repos/x-plugins/docs/public/reporting/getting-started.asciidoc">Edit me</ulink></bridgehead>
<simpara>Report generation can be automated with Watcher, or by submitting an HTTP POST
request from a script.</simpara>
<important>
<simpara>The interval between report requests must be longer than the time it
takes to generate the reports&#8212;otherwise, the report queue can back up. To
avoid this, increase the time between report requests.</simpara>
<simpara>If you are using watches to generate a lot of reports, set up a dedicated
Watcher cluster instead of running Watcher on your production cluster.
Currently, if the report queue backs up due to a high number of watcher-related
tasks, you might need to delete the watch index and restart the node to
recover. We are actively working to improve the integration between Watcher
and Reporting to prevent this from happening.</simpara>
</important>
<simpara>You can request PDF reports through three Kibana endpoints:</simpara>
<itemizedlist>
<listitem>
<simpara>
Dashboard Reports:  <literal>/api/reporting/generate/dashboard/&lt;dashboard-id&gt;&amp;sync</literal>
</simpara>
</listitem>
<listitem>
<simpara>
Visualization Reports:  <literal>/api/reporting/generate/visualization/&lt;visualization-id&gt;&amp;sync</literal>
</simpara>
</listitem>
<listitem>
<simpara>
Saved Search Reports: <literal>/api/reporting/generate/search/&lt;saved-search-id&gt;&amp;sync</literal>
</simpara>
</listitem>
</itemizedlist>
<note><simpara>The <literal>&amp;sync</literal> parameter is required to retrieve a PDF of the report. If you
omit it, Reporting returns a JSON structure that only contains the report
metadata.</simpara></note>
<simpara>To specify the time period you want to include in the report, you use the <literal>_g</literal>
parameter in the request. For example:</simpara>
<programlisting language="shell" linenumbering="unnumbered">http://0.0.0.0:5601/api/reporting/generate/dashboard/error-monitoring?_g=(time:(from:now-1d%2Fd,mode:quick,to:now-1d%2Fd))&amp;sync</programlisting>
<simpara>You can get the URL for a particular report through the Kibana UI:</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>
Load the saved object.
</simpara>
</listitem>
<listitem>
<simpara>
Click the <emphasis role="strong">Generate PDF</emphasis> button in the Kibana toolbar.
</simpara>
</listitem>
<listitem>
<simpara>
Copy the displayed <emphasis role="strong">Generation URL</emphasis>.
</simpara>
</listitem>
</orderedlist>
<simpara>To configure a watch to email reports, you use the
<ulink url="https://www.elastic.co/guide/en/watcher/current/actions.html#configuring-email-attachments">
<literal>http</literal> attachment type</ulink> in an <literal>email</literal> action.</simpara>
<simpara>For example, the following watch generates a report that contains the
<emphasis role="strong">Error Monitoring</emphasis> dashboard and emails the report every hour:</simpara>
<programlisting language="shell" linenumbering="unnumbered">PUT _watcher/watch/error_report
{
  "trigger" : {
    "schedule": {
      "interval": "1h"
    }
  },
  "actions" : {
  "email_admin" : { <co id="CO1-1"/>
    "email": {
      "to": "'Recipient Name &lt;recipient@example.com&gt;'",
      "subject": "Error Monitoring Report",
      "attachments" : {
        "error_report.pdf" : {
          "http" : {
            "content_type" : "application/pdf",
            "request" : {
              "method": "POST", <co id="CO1-2"/>
              "headers": {
                "kbn-xsrf": "reporting"
              },
              "read_timeout": "300s", <co id="CO1-3"/>
              "url": "http://0.0.0.0:5601/api/reporting/generate/dashboard/Error-Monitoring?_g=(time:(from:now-1d%2Fd,mode:quick,to:now))&amp;sync" <co id="CO1-4"/>
            }
          }
        }
      }
    }
  }
 }
}</programlisting>
<remark> AUTOSENSE</remark>
<calloutlist>
<callout arearefs="CO1-1">
<para>
You must <ulink url="https://www.elastic.co/guide/en/watcher/current/email-services.html#email-account">
configure at least one email account</ulink> to enable Watcher to send email.
</para>
</callout>
<callout arearefs="CO1-2">
<para>
As of <link linkend="post-change">version 2.4.1</link>, requests to the Reporting endpoints
must use POST and include the <literal>kbn-xsrf</literal> header.
</para>
</callout>
<callout arearefs="CO1-3">
<para>
Increase the <literal>read_timeout</literal> to give Reporting enough time to generate the
report.
</para>
</callout>
<callout arearefs="CO1-4">
<para>
This is an example Generation URL. You can copy and paste the URL for any
report from the Kibana UI.
</para>
</callout>
</calloutlist>
<simpara>For more information about configuring watches, see the
<ulink url="https://www.elastic.co/guide/en/watcher/2.4/shield-integration.html">Watcher Reference</ulink>.</simpara>
<bridgehead id="securing-reporting" renderas="sect2">Securing the Reporting Endpoints<ulink role="edit_me" url="/mnt/docs/docs/.repos/x-plugins/docs/public/reporting/getting-started.asciidoc">Edit me</ulink></bridgehead>
<simpara>In a production environment, you should use Shield to restrict access to the
Reporting endpoints to authorized users. This requires that you:</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>
<ulink url="https://www.elastic.co/guide/en/shield/2.4/getting-started.html">Install and configure Shield</ulink> on your
Elasticsearch cluster.
</simpara>
</listitem>
<listitem>
<simpara>
<ulink url="https://www.elastic.co/guide/en/shield/2.4/kibana.html">Install the Shield plugin</ulink>  into Kibana.
</simpara>
</listitem>
<listitem>
<simpara>
<ulink url="https://www.elastic.co/guide/en/shield/2.4/kibana.html#configure-kibana-cert">Configure an SSL certificate</ulink>
for Kibana.
</simpara>
</listitem>
<listitem>
<simpara>
Configure Watcher to trust the Kibana server&#8217;s certificate by adding it to
the Watcher truststore on each node:
</simpara>
<orderedlist numeration="loweralpha">
<listitem>
<simpara>
Import the Kibana server certificate into the Watcher truststore using
Java Keytool:
</simpara>
<programlisting language="shell" linenumbering="unnumbered">keytool -importcert -keystore watcher-truststore.jks -file server.crt</programlisting>
<note><simpara>If the truststore doesn&#8217;t already exist, it is created.</simpara></note>
</listitem>
<listitem>
<simpara>
Make sure the <literal>watcher.http.ssl.truststore.path</literal> setting in
<literal>elasticsearch.yml</literal> specifies the location of the Watcher
truststore.
</simpara>
</listitem>
</orderedlist>
</listitem>
<listitem>
<simpara>
<ulink url="https://www.elastic.co/guide/en/shield/2.4/reporting.html">Add one or more users</ulink> who have the permissions
necessary to use Kibana and Reporting.
</simpara>
</listitem>
</orderedlist>
<simpara>Once you&#8217;ve installed the Shield plugin into Kibana and enabled SSL, all
requests to the Reporting endpoints must include valid credentials.
For example, the following watch submits requests as the <literal>es_admin</literal> user:</simpara>
<programlisting language="shell" linenumbering="unnumbered">PUT _watcher/watch/error_report
{
  "trigger" : {
    "schedule": {
      "interval": "1h"
    }
  },
  "actions" : {
  "email_admin" : {
    "email": {
      "to": "'Recipient Name &lt;recipient@example.com&gt;'",
      "subject": "Error Monitoring Report",
      "attachments" : {
        "error_report.pdf" : {
          "http" : {
            "content_type" : "application/pdf",
            "request" : {
              "method": "POST",
              "scheme": "https", <co id="CO2-1"/>
              "headers": {
                "kbn-xsrf": "reporting"
              },
              "auth": { <co id="CO2-2"/>
                "basic": {
                  "username": "es_admin",
                  "password": "adminpassword"
                }
              },
              "read_timeout": "300s",
              "url": "https://0.0.0.0:5601/api/reporting/generate/dashboard/Error-Monitoring?_g=(time:(from:now-1d%2Fd,mode:quick,to:now))&amp;sync"
            }
          }
        }
      }
    }
  }
 }
}</programlisting>
<remark> AUTOSENSE</remark>
<calloutlist>
<callout arearefs="CO2-1">
<para>
You must connect to the Reporting endpoints via HTTPS when SSL is enabled.
</para>
</callout>
<callout arearefs="CO2-2">
<para>
Provide user credentials for a user with permission to access Kibana and Reporting.
For more information, see <ulink url="https://www.elastic.co/guide/en/shield/2.4/reporting.html#reporting-app-users">
Setting up a Reporting Role</ulink>.
</para>
</callout>
</calloutlist>
</chapter>
<chapter id="installing-reporting">
<title>Installing Reporting<ulink role="edit_me" url="/mnt/docs/docs/.repos/x-plugins/docs/public/reporting/installing-reporting.asciidoc">Edit me</ulink></title>
<simpara>Reporting 2.4.2 requires:</simpara>
<itemizedlist>
<listitem>
<simpara>
Java 7 or later. <ulink url="http://www.oracle.com/technetwork/java/javase/downloads/index-jsp-138363.html">
Download and install</ulink>.
</simpara>
</listitem>
<listitem>
<simpara>
Elasticsearch 2.4.0. <ulink url="https://www.elastic.co/guide/en/elasticsearch/reference/2.4/_installation.html">Download and install</ulink>.
</simpara>
</listitem>
<listitem>
<simpara>
Kibana 4.6.1. <ulink url="https://www.elastic.co/guide/en/elasticsearch/reference/2.4/setup.html">Download and install</ulink>.
</simpara>
</listitem>
<listitem>
<simpara>
A modern web browser. <ulink url="http://www.elastic.co/subscriptions/matrix#matrix_browsers">Supported
Browsers</ulink>
</simpara>
</listitem>
</itemizedlist>
<simpara>To install Reporting:</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>
If you haven&#8217;t already, install the License plugin in Elasticsearch by running
<literal>bin/plugin</literal> in  your Elasticsearch installation directory.
</simpara>
<programlisting language="sh" linenumbering="unnumbered">bin/plugin install license</programlisting>
</listitem>
<listitem>
<simpara>
Install the Reporting app into Kibana by running <literal>bin/kibana plugin</literal> in your
Kibana installation directory.
</simpara>
<programlisting language="shell" linenumbering="unnumbered">bin/kibana plugin --install kibana/reporting/latest</programlisting>
</listitem>
<listitem>
<simpara>
Set the <literal>reporting.encryptionKey</literal> property in the <literal>kibana.yml</literal> configuration file.
You can use any text string as the encryption key.
</simpara>
<programlisting language="yaml" linenumbering="unnumbered">reporting.encryptionKey: "something_secret"</programlisting>
<note><simpara>If you are using Shield, see <ulink url="https://www.elastic.co/guide/en/shield/2.4/kibana.html">
Using Kibana with Shield</ulink> and <ulink url="https://www.elastic.co/guide/en/shield/2.4/reporting.html">Using
Reporting with Shield</ulink> for additional setup instructions.</simpara></note>
</listitem>
<listitem>
<simpara>
Start Kibana by running <literal>bin/kibana</literal>.
</simpara>
</listitem>
<listitem>
<simpara>
To verify your Reporting installation, point your web browser at
<literal>http://0.0.0.0:5601/</literal> to open Kibana. The Generate Report button is
added to the Toolbar:
</simpara>
<simpara><inlinemediaobject>
  <imageobject>
  <imagedata fileref="images/reporting.jpg"/>
  </imageobject>
  <textobject><phrase>Reporting</phrase></textobject>
</inlinemediaobject></simpara>
</listitem>
</orderedlist>
<note><simpara>If report generation fails with the error
"Phantom immediately exited with: 127" you&#8217;ll need to install the <literal>libfontconfig</literal>
and <literal>libfreetype6</literal> packages.</simpara></note>
<simpara>For offline installation instructions and more, see <link linkend="installing-reporting">Installing Reporting</link>.</simpara>
<bridgehead id="package-installation" renderas="sect2">Installing the License plugin on a DEB/RPM Package Installation<ulink role="edit_me" url="/mnt/docs/docs/.repos/x-plugins/docs/public/reporting/installing-reporting.asciidoc">Edit me</ulink></bridgehead>
<simpara>If you use the DEB/RPM packages to install Elasticsearch, by default Elasticsearch is installed in
<literal>/usr/share/elasticsearch</literal> and the configuration files are stored in <literal>/etc/elasticsearch</literal>. (For the
complete list of default paths, see <ulink url="https://www.elastic.co/guide/en/elasticsearch/reference/2.4/setup-dir-layout.html#_deb_and_rpm">Directory Layout</ulink> in
the Elasticsearch Reference.)</simpara>
<simpara>To install the License plugin on a DEB/RPM package installation, you need to run
<literal>bin/plugin install</literal> from the <literal>/usr/share/elasticsearch</literal> directory with superuser permissions:</simpara>
<programlisting language="shell" linenumbering="unnumbered">cd /usr/share/elasticsearch
sudo bin/plugin install license</programlisting>
<note><simpara>If the configuration files are not in <literal>/etc/elasticsearch</literal> you need to specify the location of
the configuration files by including <literal>-Des.path.conf</literal>.</simpara></note>
<bridgehead id="reporting-installing-offline" renderas="sect2">Installing Reporting on Offline Machines<ulink role="edit_me" url="/mnt/docs/docs/.repos/x-plugins/docs/public/reporting/installing-reporting.asciidoc">Edit me</ulink></bridgehead>
<simpara>The Elasticsearch <literal>bin/plugin</literal> script and <literal>bin/kibana plugin</literal> require Internet access to
download and install the License and Reporting plugins. If your server doesn’t have Internet access,
you can manually download and install the plugins.</simpara>
<simpara>To install Reporting on a machine that doesn&#8217;t have Internet access:</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>
Manually download the License and Reporting binaries:
</simpara>
<itemizedlist>
<listitem>
<simpara>
<ulink url="https://download.elastic.co/elasticsearch/release/org/elasticsearch/plugin/license/2.4.0/license-2.4.0.zip">
<ulink url="https://download.elastic.co/elasticsearch/release/org/elasticsearch/plugin/license/2.4.0/license-2.4.0.zip">https://download.elastic.co/elasticsearch/release/org/elasticsearch/plugin/license/2.4.0/license-2.4.0.zip</ulink></ulink>
(<ulink url="https://download.elastic.co/elasticsearch/release/org/elasticsearch/plugin/license/2.4.0/license-2.4.0.zip.sha1">sha1</ulink>)
</simpara>
</listitem>
<listitem>
<simpara>
<ulink url="https://download.elasticsearch.org/kibana/reporting/reporting-2.4.2.tar.gz">
<ulink url="https://download.elasticsearch.org/kibana/reporting/reporting-2.4.2.tar.gz">https://download.elasticsearch.org/kibana/reporting/reporting-2.4.2.tar.gz</ulink></ulink> (<ulink url="https://download.elasticsearch.org/kibana/reporting/reporting-2.4.2.tar.gz.sha1.txt">sha1</ulink>)
</simpara>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<simpara>
Transfer the archive files to a temporary directory on the offline machine.
(Do NOT put the archive files in the Elasticsearch plugins directory.)
</simpara>
</listitem>
<listitem>
<simpara>
Specify the archive files when you run <literal>bin/plugin</literal> and <literal>bin/kibana</literal>. For
example:
</simpara>
<programlisting language="sh" linenumbering="unnumbered">bin/plugin install file:///path/to/file/license-2.4.2.zip
bin/kibana plugin --install reporting --url file:///path/to/file/reporting-2.4.2.tar.gz</programlisting>
<note><simpara>You must specify an absolute path to the zip file after the <literal>file://</literal> protocol.</simpara></note>
</listitem>
</orderedlist>
</chapter>
<chapter id="reporting-settings">
<title>Configuring Reporting<ulink role="edit_me" url="/mnt/docs/docs/.repos/x-plugins/docs/public/reporting/reporting-settings.asciidoc">Edit me</ulink></title>
<simpara>The default settings enable Reporting to work out of the box in most
cases. However, you can configure the following options in
<literal>kibana.yml</literal> to control how Reporting accesses Kibana, fine-tune the behavior
of the background Reporting jobs, and control how many reports can be generated
at one time.</simpara>
<bridgehead id="reporting-config-settings" renderas="sect2">Reporting Settings<ulink role="edit_me" url="/mnt/docs/docs/.repos/x-plugins/docs/public/reporting/reporting-settings.asciidoc">Edit me</ulink></bridgehead>
<variablelist>
<varlistentry>
<term>
<literal>reporting.encryptionKey</literal>
</term>
<listitem>
<simpara>
A unique string used for encryption to protect sensitive information, like headers.
</simpara>
</listitem>
</varlistentry>
</variablelist>
<bridgehead id="reporting-kibana-server-settings" renderas="sect2">Kibana Server Settings<ulink role="edit_me" url="/mnt/docs/docs/.repos/x-plugins/docs/public/reporting/reporting-settings.asciidoc">Edit me</ulink></bridgehead>
<simpara>Reporting uses the Kibana interface to generate reports. If you use a proxy
in your stack or otherwise change how you access Kibana, you might need to
configure the following settings.</simpara>
<variablelist>
<varlistentry>
<term>
<literal>reporting.kibanaApp</literal>
</term>
<listitem>
<simpara>
The root path used to access Kibana, defaults to <literal>/app/kibana</literal>.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<literal>reporting.kibanaServer.port</literal>
</term>
<listitem>
<simpara>
The port used to access Kibana, if different than the <literal>server.port</literal> value.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<literal>reporting.kibanaServer.protocol</literal>
</term>
<listitem>
<simpara>
The protocol used to access Kibana, typically <literal>http</literal> or <literal>https</literal>.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<literal>reporting.kibanaServer.hostname</literal>
</term>
<listitem>
<simpara>
The hostname used to access Kibana, if different than the <literal>server.name</literal> value.
</simpara>
</listitem>
</varlistentry>
</variablelist>
<bridgehead id="reporting-job-queue-settings" renderas="sect2">Background Job Settings<ulink role="edit_me" url="/mnt/docs/docs/.repos/x-plugins/docs/public/reporting/reporting-settings.asciidoc">Edit me</ulink></bridgehead>
<simpara>Reporting generates reports in the background and jobs are coordinated using
documents in Elasticsearch. Depending on how often you generate reports and
the overall number of reports, you might need to adjust the following
settings.</simpara>
<variablelist>
<varlistentry>
<term>
<literal>reporting.queue.indexInterval</literal>
</term>
<listitem>
<simpara>
How often the index that stores reporting jobs rolls over to a new index.
Valid values are <literal>year</literal>, <literal>month</literal>, <literal>week</literal>, <literal>day</literal>, and <literal>hour</literal>. Defaults to <literal>week</literal>.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<literal>reporting.queue.pollInterval</literal>
</term>
<listitem>
<simpara>
How often idle workers poll the index for pending jobs.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<literal>reporting.queue.timeout</literal>
</term>
<listitem>
<simpara>
How long each worker has to produce a report. If your machine is slow or under
constant heavy load, you might need to increase this timeout. Specified in
milliseconds. Defaults to <literal>30000</literal> (30 seconds).
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<literal>reporting.queue.syncSocketTimeout</literal>
</term>
<listitem>
<simpara>
The maximum amount of time the socket should be held open for synchronous document
requests. Defaults to <literal>300000</literal> (5 minutes).
</simpara>
</listitem>
</varlistentry>
</variablelist>
<bridgehead id="reporting-capture-settings" renderas="sect2">Capture Settings<ulink role="edit_me" url="/mnt/docs/docs/.repos/x-plugins/docs/public/reporting/reporting-settings.asciidoc">Edit me</ulink></bridgehead>
<simpara>Reporting works by grabbing screenshots from Kibana. These settings are used to
control various aspects of the capturing process.</simpara>
<variablelist>
<varlistentry>
<term>
<literal>reporting.capture.concurrency</literal>
</term>
<listitem>
<simpara>
The number of concurrent capture processes to run. Note that jobs are CPU bound,
and exceeding the number of cores available on the machine will likely be very
slow and might cause issues. Defaults to the number of cores on
the machine.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<literal>reporting.capture.loadDelay</literal>
</term>
<listitem>
<simpara>
The amount of time to wait for Kibana to finish rendering the visualization before
taking a screenshot. Raising this value will increase report generation time, but
may be required on slower machines. If you are seeing empty images instead of
visualizations in your reports, try increasing this value.
Defaults to <literal>3000</literal> (3 seconds).
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<literal>reporting.capture.timeout</literal>
</term>
<listitem>
<simpara>
The maximum amount of time to wait for things to render in Kibana when capturing
screenshots. Defaults to <literal>6000</literal> (6 seconds).
</simpara>
</listitem>
</varlistentry>
</variablelist>
</chapter>
<chapter id="reporting-limitations">
<title>Limitations<ulink role="edit_me" url="/mnt/docs/docs/.repos/x-plugins/docs/public/reporting/reporting-limitations.asciidoc">Edit me</ulink></title>
<bridgehead id="_high_report_request_loads_can_result_in_watch_notification_failures" renderas="sect2">High Report Request Loads Can Result in Watch Notification Failures<ulink role="edit_me" url="/mnt/docs/docs/.repos/x-plugins/docs/public/reporting/reporting-limitations.asciidoc">Edit me</ulink></bridgehead>
<simpara>If the interval between report requests is shorter than the time it takes to
generate the reports, the report queue can back up. If you are using Watcher
to automate report generation, this can result in notification failures.</simpara>
<simpara>To keep the report queue from backing up, stagger your report requests or
increase the trigger interval for your watches that generate reports.</simpara>
<bridgehead id="_blank_reports_generated" renderas="sect2">Blank Reports Generated<ulink role="edit_me" url="/mnt/docs/docs/.repos/x-plugins/docs/public/reporting/reporting-limitations.asciidoc">Edit me</ulink></bridgehead>
<simpara>If your generated reports contain blank charts, try increasing the
<literal>reporting.capture.loadDelay</literal> setting in <literal>kibana.yml</literal>.</simpara>
</chapter>
<chapter id="reporting-release-notes">
<title>Release Notes<ulink role="edit_me" url="/mnt/docs/docs/.repos/x-plugins/docs/public/reporting/release-notes.asciidoc">Edit me</ulink></title>
<bridgehead id="reporting-change-list" renderas="sect2">Change List<ulink role="edit_me" url="/mnt/docs/docs/.repos/x-plugins/docs/public/reporting/release-notes.asciidoc">Edit me</ulink></bridgehead>
<bridgehead id="post-change" renderas="sect3">2.4.2<ulink role="edit_me" url="/mnt/docs/docs/.repos/x-plugins/docs/public/reporting/release-notes.asciidoc">Edit me</ulink></bridgehead>
<simpara>September 28, 2016</simpara>
<itemizedlist><title>Enhancements</title>
<listitem>
<simpara>
You can now view all reports, or just your own reports.
</simpara>
</listitem>
</itemizedlist>
<bridgehead id="post-change" renderas="sect3">2.4.1<ulink role="edit_me" url="/mnt/docs/docs/.repos/x-plugins/docs/public/reporting/release-notes.asciidoc">Edit me</ulink></bridgehead>
<simpara>September 6, 2016</simpara>
<itemizedlist><title>Breaking Changes</title>
<listitem>
<simpara>
To prevent abuse, the reporting endpoints now require requests to be submitted
as HTTP POST requests rather than GET requests.
</simpara>
</listitem>
</itemizedlist>
<bridgehead id="_2_4_0" renderas="sect3">2.4.0<ulink role="edit_me" url="/mnt/docs/docs/.repos/x-plugins/docs/public/reporting/release-notes.asciidoc">Edit me</ulink></bridgehead>
<simpara>August 31, 2016</simpara>
<itemizedlist><title>New Features</title>
<listitem>
<simpara>
Manually Export PDF reports from Kibana and automatically generate reports
from Watcher.
</simpara>
</listitem>
</itemizedlist>
</chapter>
</book>
